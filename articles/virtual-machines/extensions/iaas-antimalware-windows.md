---
title: Microsoft-program mot skadlig kod tillägg för virtuella Windows-datorer i Azure | Microsoft Docs
description: Distribuera tillägg för Azure program mot skadlig kod på Windows virtuell dator med ett tillägg.
services: virtual-machines-windows
documentationcenter: ''
author: TomShinder
manager: jeconnoc
editor: ''
ms.assetid: ''
ms.service: virtual-machines-windows
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 04/12/2018
ms.author: tomsh
ms.openlocfilehash: 838e8f2128e446a0c1bfb2ea03fd4f9203e6100e
ms.sourcegitcommit: d98d99567d0383bb8d7cbe2d767ec15ebf2daeb2
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 05/10/2018
---
# <a name="microsoft-antimalware-extension-for-windows"></a>Tillägg för Microsoft-program mot skadlig kod för Windows

## <a name="overview"></a>Översikt

Moderna hotbilden i grunden för molnmiljöer är mycket dynamisk öka trycket på företag IT cloud-prenumeranter att upprätthålla effektiv skydd för att uppfylla krav efterlevnad och säkerhet. Microsoft Antimalware för Azure är ledigt realtidsskydd funktion som hjälper dig att identifiera och ta bort virus, spionprogram och annan skadlig programvara med konfigurerbara aviseringar när känd skadlig eller oönskad programvara försöker installera sig själva eller köras på Azure-system. Lösningen bygger på samma plattform för program mot skadlig kod som Microsoft Security Essentials (mus), Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Windows Intune och Windows Defender för Windows 8.0 och senare.
Microsoft Antimalware för Azure är en enskild agent lösning för program och klient-miljöer är avsedd att köras i bakgrunden utan mänsklig inblandning. Du kan distribuera skydd utifrån behoven i din programbelastningar, med antingen grundläggande secure-som-standard eller avancerad anpassad konfiguration, inklusive övervakning av program mot skadlig kod.

## <a name="prerequisites"></a>Förutsättningar

### <a name="operating-system"></a>Operativsystem

Microsoft Antimalware för Azure lösningen innehåller Microsoft Antimalware Client och tjänsten, klassiska distributionsmodellen för program mot skadlig kod, Antimalware PowerShell-cmdlets och tillägg för Azure-diagnostik. Microsoft Antimalware lösning stöds på Windows Server 2008 R2, Windows Server 2012 och Windows Server 2012 R2-operativsystem. Den stöds inte på Windows Server 2008-operativsystem och också stöds inte i Linux. 

Windows Defender är den inbyggda program mot skadlig kod aktiverat i Windows Server 2016. Windows Defender-gränssnittet är också aktiverad som standard på vissa Windows Server 2016 SKU: er.
Tillägget Azure VM program mot skadlig kod kan fortfarande läggs till en Windows Server 2016 Azure VM Windows Defender, men i detta scenario tillägget gäller policyer för valfri konfiguration som ska användas av Windows Defender tillägget distribuerar inte någon ytterligare antivirustjänsten. Du kan läsa mer om den här uppdateringen [här](https://blogs.msdn.microsoft.com/azuresecurity/2017/03/07/update-to-azure-antimalware-extension-for-cloud-services/).

### <a name="internet-connectivity"></a>Internetanslutning

Microsoft Antimalware för Windows kräver att den virtuella måldatorn är ansluten till internet för att ta emot-motorn och Signaturuppdateringar regelbundet. 

## <a name="template-deployment"></a>Malldistribution
Azure VM-tillägg kan distribueras med Azure Resource Manager-mallar. Mallar är perfekt när du distribuerar en eller flera virtuella datorer som kräver post distributionskonfiguration, till exempel onboarding till Azure program mot skadlig kod.

JSON-konfiguration för ett tillägg för virtuell dator kan kapslas i den virtuella datorresursen eller placeras i roten eller översta nivån i en Resource Manager JSON-mall. Placeringen av JSON-konfigurationen påverkar värdet av resursens namn och typen. Mer information finns i [ange namn och typ för underordnade resurser](../../azure-resource-manager/resource-manager-templates-resources.md). 

I följande exempel förutsätter VM-tillägget är kapslad i den virtuella datorresursen. När kapsla resursen tillägget JSON placeras i den `"resources": []` objekt av den virtuella datorn.

```json
{
      "type": "Microsoft.Compute/virtualMachines/extensions",
      "name": "[concat(parameters('vmName'),'/', parameters('vmExtensionName'))]",
      "apiVersion": "2017-03-30",
      "location": "[resourceGroup().location]",
      "dependsOn": [
        "[concat('Microsoft.Compute/virtualMachines/', parameters('vmName'))]"
      ],

      "properties": {
        "publisher": "Microsoft.Azure.Security",
        "type": "IaaSAntimalware",
        "typeHandlerVersion": "1.3",
        "settings": {
          "AntimalwareEnabled": "true",
          "Exclusions": {
            "Extensions": ".log;.ldf",
            "Paths": "D:\\IISlogs;D:\\DatabaseLogs",
            "Processes": "mssence.svc"
          },

          "RealtimeProtectionEnabled": "true",
          "ScheduledScanSettings": {
            "isEnabled": "true",
            "scanType": "Quick",
            "day": "7",
            "time": "120"
          }
        },
        "protectedSettings": null
      }
}
```

## <a name="powershell-deployment"></a>PowerShell-distribution
Beror på vilken typ av distribution, Använd motsvarande kommandon för att distribuera program mot skadlig kod Azure-tillägget för virtuell dator till en befintlig virtuell dator.

  * Klassiska IaaS virtuell dator- http://msdn.microsoft.com/library/azure/dn771718.aspx
  * Azure Resource Manager-baserad virtuell dator- https://blogs.msdn.microsoft.com/azuresecurity/2016/02/24/update-on-microsoft-antimalware-and-azure-resource-manager-arm-vms/
  * Azure Service Fabric-kluster- https://blogs.msdn.microsoft.com/azuresecurity/2016/10/07/add-microsoft-antimalware-to-azure-service-fabric-clusters/
  * Klassiska Cloud Service- http://msdn.microsoft.com/library/azure/dn771718.aspx

## <a name="troubleshoot-and-support"></a>Felsöka och stöd

### <a name="troubleshoot"></a>Felsöka

Microsoft Antimalware tillägget loggar finns på - %Systemdrive%\WindowsAzure\Logs\Plugins\Microsoft.Azure.Security.IaaSAntimalware (eller PaaSAntimalware)\1.5.5.x (version #) \CommandExecution.log

### <a name="error-codes-and-their-meanings"></a>Felkoder och deras innebörd

| Felkod | Betydelse | Möjlig åtgärd |
| :---: | --- | --- |
| -2147156224 | MSI är upptagen med en annan installation | Försök att köra installationen senare |
| -2147156221 | MUS installationsprogrammet körs redan | Endast köra en instans i taget |
| -2147156208 | Ont om ledigt utrymme < 200 MB | Ta bort oanvända filer och försök installera igen |
| -2147156187 | Senaste installation, uppgradering, uppdatera eller avinstallera begärda omstart | Starta om datorn och försök installera igen |
| -2147156121 | Installationsprogrammet försökte ta bort konkurrenter produkten. Men konkurrenter produkten avinstallationen misslyckades | Försök att ta bort konkurrenter produkten manuellt, starta om datorn och försök installera igen  |
| -2147156116 | Princip för fil-verifieringen misslyckades | Kontrollera att du skickar en giltig XML-fil till installationsprogrammet  |
| -2147156095 | Installationsprogrammet kunde inte starta antivirustjänsten | Kontrollera alla binärfiler är korrekt signerade och rätt licensiering fil har installerats |
| -2147023293 | Ett allvarligt fel inträffade under installationen. I de flesta fall kommer den. Epp.msi, kan inte register\start\stop AM tjänsten eller mini filtrera drivrutin | MSI-loggar från EPP.msi som krävs här för framtida undersökningar |
| -2147023277 | Det gick inte att öppna installationspaketet | Kontrollera att paketet finns och är tillgänglig eller Kontakta programvaruleverantören för att verifiera att det här är ett giltigt Windows Installer-paket |
| -2147156109 | Defender är ett förhandskrav |  |
| -2147205073 | Utfärdaren websso stöds inte | |
| -2147024893 | Det går inte att hitta den angivna sökvägen |  |
| -2146885619 | Inte ett kryptografiskt meddelande eller kryptografiska meddelandet har inte formaterats korrekt |  |
| -1073741819 | Instruktionen på 0 x %p refererar till minne på 0 x %p. Minnet som kunde inte %s |  |
| 1 | Felaktig funktion |  |


### <a name="support"></a>Support

Om du behöver mer hjälp när som helst i den här artikeln kan du kontakta Azure-experter på den [MSDN Azure och Stack Overflow-forum](https://azure.microsoft.com/support/forums/). Alternativt kan du lagra en incident i Azure-supporten. Gå till den [Azure supportwebbplats](https://azure.microsoft.com/support/options/), och välj Get support. Information om hur du använder Azure stöder finns i [vanliga frågor om Microsoft Azure-supporten](https://azure.microsoft.com/support/faq/).